<div class="project-details-container" *ngIf="project; else loadingTpl">

    <!-- Header -->
    <section class="card">
        <h3>Description / Contenu du courriel</h3>
        <p class="email-content">{{ project.metadata.emailContent }}</p>
    </section>
</div>

<!-- Map Tab -->
<div *ngIf="activeTab === 'map'" class="tab-pane">
    <div class="map-container">
        <div id="map" style="height: 600px; width: 100%; border-radius: 8px;"></div>
    </div>
</div>

<!-- Documents Tab -->
<div *ngIf="activeTab === 'documents'" class="tab-pane">
    <div class="documents-list">
        <div *ngFor="let doc of project.documents" class="doc-item">
            <span class="icon">ðŸ“„</span>
            <div class="doc-info">
                <a [href]="doc.url" target="_blank">{{ doc.name }}</a>
                <span class="size">{{ doc.type }}</span>
            </div>
        </div>
        <div *ngIf="!project.documents?.length" class="empty-state">
            Aucun document joint.
        </div>
    </div>
</div>

<!-- Analysis Tab -->
<div *ngIf="activeTab === 'analysis'" class="tab-pane">
    <div class="analysis-placeholder">
        <p>L'analyse automatique n'a pas encore Ã©tÃ© effectuÃ©e.</p>
        <button class="btn-primary">Lancer l'analyse IA</button>
    </div>
</div>

<!-- History Tab -->
<div *ngIf="activeTab === 'history'" class="tab-pane">
    <app-project-history [projectId]="project.id!"></app-project-history>
</div>

</main>

<!-- Collaboration Section -->
<app-comments [projectId]="project.id!" *ngIf="project.id"></app-comments>

</div>

<ng-template #loadingTpl>
    <div class="loading-state">
        Chargement du dossier...
    </div>
</ng-template>